function [imagette_col,marq_extr, Flag_exception_cc,Flag_exception_pb_photo] = ExtractionImagette(Im_color, Marqueur, Im_dil3lvl)    Flag_exception_cc = 0;  Flag_exception_pb_photo = 0;  [h,w] = size(Im_dil3lvl);    % Récupération des points limites  sommev = sum(Marqueur);  sommeh = sum(Marqueur');  xg = find(sommev,1,'first');  xd = find(sommev, 1, 'last');  yh = find(sommeh, 1, 'first');  yb = find(sommeh, 1, 'last');    valeur_milieue = Im_dil3lvl(floor(h/2),floor(w/2))+0.1;  %Test si on a capté la couleur ou la forme  if (valeur_milieue-0.1 == 0) %On est dans la forme        %Pour pouvoir capter la couleur, on se donne une marge    marge_forme = 60;    %Extraction de l'imagette en couleur    imagette_col = Im_color(yh-marge_forme:yb+marge_forme,xg-marge_forme:xd+marge_forme,:);    %Extraction du marqueur    marq_extr = Marqueur(yh-marge_forme:yb+marge_forme,xg-marge_forme:xd+marge_forme);        [h1,w1] = size(imagette_col(:,:,1));      elseif (valeur_milieue - 0.1 == 0.5) %On est dans la couleur        if (Im_dil3lvl(yh-1,floor(w/2)) == 0) %On est dans le creux du carre creux            Flag_exception_cc = 1;      imagette_col = 0;      marq_extr = 0;          elseif (Im_dil3lvl(yh-1,floor(w/2)) == 1) %On est dans la couleur exterieure à la forme            %Pour ne pas prendre de contour, on erode un peu l'image      marge_couleur = 30;      %Extraction de l'imagette en couleur      imagette_col = Im_color(yh+marge_couleur:yb-marge_couleur,xg+marge_couleur:xd-marge_couleur,:);      %Extraction du marqueur      marq_extr = Marqueur(yh+marge_couleur:yb-marge_couleur,xg+marge_couleur:xd-marge_couleur);      [h1,w1] = size(imagette_col(:,:,1));    end      else     imagette_col = 0;    marq_extr = 0;    Flag_exception_pb_photo = 1;      endend